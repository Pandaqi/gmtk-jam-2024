[gd_scene load_steps=18 format=3 uid="uid://b7jvele2ehrox"]

[ext_resource type="Script" path="res://players/player.gd" id="1_w4tef"]
[ext_resource type="Script" path="res://players/modules/visuals.gd" id="2_bjcb2"]
[ext_resource type="Texture2D" uid="uid://d12rf1gcnqm2o" path="res://players/tools/tools.webp" id="3_0grvn"]
[ext_resource type="Texture2D" uid="uid://bmtics6tu3uk3" path="res://players/entities.webp" id="3_5jdl5"]
[ext_resource type="Script" path="res://players/modules/input.gd" id="3_e4uv6"]
[ext_resource type="Resource" uid="uid://6mae3yl7xg3n" path="res://progression/data/progression_data.tres" id="3_s137k"]
[ext_resource type="PackedScene" uid="uid://djgb1lp745jna" path="res://players/shadow.tscn" id="4_bekv0"]
[ext_resource type="Script" path="res://players/modules/mover.gd" id="4_fic2u"]
[ext_resource type="Resource" uid="uid://dfxb3y6yrpncv" path="res://players/tools/types/tool_magnifying_glass.tres" id="7_q43rw"]
[ext_resource type="Script" path="res://players/modules/map_tracker.gd" id="8_iq1n1"]
[ext_resource type="Script" path="res://players/modules/tool_switcher.gd" id="9_tvcpj"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_exs8b"]
radius = 30.0
height = 192.0

[sub_resource type="Animation" id="Animation_1qgl8"]
resource_name = "walk"
length = 0.4
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 0, 2]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ToolAnchor:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2(0, -225), Vector2(35, -217), Vector2(-1, -226), Vector2(-27, -227)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ToolAnchor:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0.0, 0.390303, 0.0, -0.2825]
}

[sub_resource type="Animation" id="Animation_7yj5c"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ToolAnchor:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -225)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ToolAnchor:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -128)]
}

[sub_resource type="Animation" id="Animation_75qtk"]
resource_name = "slam"
length = 0.2
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [0, 3, 4, 5, 0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2(0, -128), Vector2(0, -200), Vector2(0, -130), Vector2(0, -110), Vector2(0, -128)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ToolAnchor:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2(0, -225), Vector2(-68, -303), Vector2(60, -217), Vector2(85, -39), Vector2(0, -225)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("ToolAnchor:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [0.0, -1.17676, 0.00304592, 1.50838, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_uxvy4"]
_data = {
"RESET": SubResource("Animation_7yj5c"),
"slam": SubResource("Animation_75qtk"),
"walk": SubResource("Animation_1qgl8")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_vakd5"]
radius = 86.4928

[node name="Player" type="CharacterBody2D"]
collision_mask = 0
motion_mode = 1
script = ExtResource("1_w4tef")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -22)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_exs8b")

[node name="Visuals" type="Node2D" parent="." node_paths=PackedStringArray("tool_switcher", "mover")]
script = ExtResource("2_bjcb2")
tool_switcher = NodePath("../ToolSwitcher")
mover = NodePath("../Mover")
prog_data = ExtResource("3_s137k")

[node name="Shadow" parent="Visuals" instance=ExtResource("4_bekv0")]

[node name="ToolAnchor" type="Node2D" parent="Visuals"]
position = Vector2(0, -225)

[node name="Sprite2D" type="Sprite2D" parent="Visuals/ToolAnchor"]
position = Vector2(2, -116)
texture = ExtResource("3_0grvn")
hframes = 4
vframes = 2

[node name="Sprite2D" type="Sprite2D" parent="Visuals"]
position = Vector2(0, -128)
texture = ExtResource("3_5jdl5")
hframes = 4
vframes = 2

[node name="AnimationPlayer" type="AnimationPlayer" parent="Visuals"]
libraries = {
"": SubResource("AnimationLibrary_uxvy4")
}

[node name="Input" type="Node2D" parent="."]
script = ExtResource("3_e4uv6")

[node name="Mover" type="Node2D" parent="." node_paths=PackedStringArray("input", "tool_switcher")]
script = ExtResource("4_fic2u")
input = NodePath("../Input")
tool_switcher = NodePath("../ToolSwitcher")
prog_data = ExtResource("3_s137k")

[node name="MapTracker" type="Node2D" parent="."]
position = Vector2(0, 3)
script = ExtResource("8_iq1n1")

[node name="Area2D" type="Area2D" parent="MapTracker"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="MapTracker/Area2D"]
shape = SubResource("CircleShape2D_vakd5")

[node name="ToolSwitcher" type="Node2D" parent="." node_paths=PackedStringArray("map_tracker", "input", "mover", "visuals")]
script = ExtResource("9_tvcpj")
map_tracker = NodePath("../MapTracker")
input = NodePath("../Input")
mover = NodePath("../Mover")
visuals = NodePath("../Visuals")
def_tool = ExtResource("7_q43rw")

[connection signal="body_entered" from="MapTracker/Area2D" to="MapTracker" method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="MapTracker/Area2D" to="MapTracker" method="_on_area_2d_body_exited"]
